<!-- Page generated 2021-11-17 12:16:07 +0000-->
<!DOCTYPE html>
<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WL2QLG5');</script>
<title>Set up Automated Builds | Docker Documentation</title>
  <meta name="description" content="Set up automated builds" />
  <meta name="keywords" content="automated, build, images, Docker Hub">
  <link rel="canonical" href="https://docs.docker.com/docker-hub/builds/" />

  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/favicons/docs@2x.ico" sizes="129x128">
  <link rel="apple-touch-icon" type="image/x-icon" href="/favicons/docs@2x.ico" sizes="129x128">
  <meta name="msapplication-TileImage" content="/favicons/docs@2x.ico">
  <meta property="og:image" content="/favicons/docs@2x.ico"/>
  <meta name="theme-color" content="#2496ed" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- hide elements that are only shown without JavaScript enabled -->
  <script>document.documentElement.classList.add('js')</script>
  <style>html.js .no-js { display: none !important; }</style><script defer src="/js/theme-switcher.js"></script>
  <script defer src="/js/anchorlinks.js"></script>
  <script defer src="/js/jquery.js"></script>
  <script defer src="/js/bootstrap.min.js"></script>
  <script defer src="/js/docs.js"></script><script defer src="/js/search.js"></script><link rel="preload" as="font" href="https://fonts.gstatic.com/s/opensans/v18/mem8YaGs126MiZpBA-UFVZ0bf8pkAg.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/fonts/geomanist/hinted-Geomanist-Book.woff2"    type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/fonts/geomanist/hinted-Geomanist-Regular.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/fonts/glyphicons-halflings-regular.woff2"       type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/fonts/fontawesome-webfont.woff2?v=4.7.0"        type="font/woff2" crossorigin="anonymous">

  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css" id="pagestyle">

  <!-- SEO stuff -->
  <meta name="twitter:title" itemprop="title name" content="Set up Automated Builds"/>
  <meta name="twitter:description" property="og:description" itemprop="description" content="" />
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:domain" content="docs.docker.com"/>
  <meta name="twitter:site" content="@docker_docs"/>
  <meta name="twitter:url" content="https://twitter.com/docker_docs"/>
  <meta name="twitter:image:src" content="https://docs.docker.com/images/docs@2x.png"/>
  <meta name="twitter:image:alt" content="Docker Documentation"/>
  <meta property="og:title" content="Set up Automated Builds" />
  <meta property="og:description" content="Set up automated builds" />
  <meta property="og:type" content="website"/>
  <meta property="og:updated_time" itemprop="dateUpdated" content="2021-11-17T12:16:07+00:00"/>
  <meta property="og:image" itemprop="image primaryImageOfPage" content="https://docs.docker.com/images/docs@2x.png"/>
  <meta property="og:locale" content="en_US" />
  <meta property="og:url" content="https://docs.docker.com/docker-hub/builds/" />
  <meta property="og:site_name" content="Docker Documentation" />
  <meta property="article:published_time" itemprop="datePublished" content="2021-11-17T12:16:07+00:00"/>
  <script type="application/ld+json">{"@context":"http://schema.org","@type":"WebPage","headline":"Set up Automated Builds","description":"Set up automated builds","url":"https://docs.docker.com/docker-hub/builds/"}</script>
  <!-- END SEO STUFF -->
</head>
<body class="colums">
    <header>
        <nav class="nav-secondary navbar navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/">
                <img class="logo" src="/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs" width="160" height="28" />
            </a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="logo-mobile">
    <a href="/">
        <img src="/images/docker-icon.svg" alt="Docker Docs" title="Docker Docs" width="30" height="30" />
    </a>
</div>
<div class="search-form" id="search-div">
    <form class="search-form form-inline" id="searchForm" action="/search/" method="get">
        <label for="st-search-input" class="sr-only">Search</label>
        <input class="search-field form-control ds-input" id="st-search-input" name="q" placeholder="Search the docs" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteResults"></div>
        <!-- <button type="submit" class="search-submit btn btn-default">Search</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container hidden-sm hidden-xs">
    <div>
        <ul class="nav navbar-nav"><li><a href="/" id="home">Home</a></li><li><a href="/get-started/overview/" id="guides">Guides</a></li><li><a href="/desktop/" id="manuals">Manuals</a></li><li><a href="/reference/" id="reference">Reference</a></li><li><a href="/samples/" id="samples">Samples</a></li></ul>
    </div>
    <div class="ctrl-right">
        <a href="javascript:void(0)" id="menu-toggle" aria-label="Current page's menu toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
    </div>
</div>
<div class="row hidden-sm hidden-xs">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li><a href="/" title="Docker docs homepage"><i class="fa fa-home"></i></a></li>
            <li><a href="/desktop/">Manuals</a></li><li><a href="/docker-hub/">Docker Hub</a></li><li><a href="/docker-hub/builds/">Automated builds</a></li><li><a href="/docker-hub/builds/">Set up automated builds</a></li></ol>
    </nav>
</div></div>
    </div>
</nav>

    </header>
    <div class="wrapper right-open">
        <div class="container-fluid">
            <div class="row">
                <div class="col-body">
                    <main class="col-content content">
                        <section class="section"><h1>Set up Automated Builds</h1><p><em class="reading-time">Estimated reading time: 17 minutes</em></p><div class="docker-upgrade-cta" role="alert">
  <div class="docker-upgrade-cta__heading">
This feature requires a Docker subscription
  </div>
  <p>The Automated Builds feature is available for Docker Pro, Team, and Business users. Upgrade now to automatically build and push your images.</p>
 <a class="btn btn-primary" role="button" href="https://www.docker.com/pricing?utm_source=docker&amp;utm_medium=webreferral&amp;utm_campaign=docs_driven_upgrade_auto_builds" target="_blank"> Upgrade now </a>
</div>

<h2 id="how-automated-builds-work">How Automated Builds work</h2>

<p>Docker Hub can automatically build images from source code in an external
repository and automatically push the built image to your Docker
repositories.</p>

<blockquote>
  <p><strong>Note</strong></p>

  <p>If you are using automated builds for an open-source project, you can join our <a href="https://www.docker.com/community/open-source/application" target="_blank" rel="noopener" class="_">Open Source Community</a> program to learn how Docker can support your project on Docker Hub.</p>
</blockquote>

<p>When you set up automated builds (also called autobuilds), you create a list of
branches and tags that you want to build into Docker images. When you push code
to a source code branch (for example in GitHub) for one of those listed image
tags, the push uses a webhook to trigger a new build, which produces a Docker
image. The built image is then pushed to the Docker Hub registry.</p>

<blockquote>
  <p><strong>Note</strong></p>

  <p>You can still use <code class="highlighter-rouge">docker push</code> to push pre-built images to
repositories with Automated Builds configured.</p>
</blockquote>

<p>If you have automated tests configured, these run after building but before
pushing to the registry. You can use these tests to create a continuous
integration workflow where a build that fails its tests does not push the built
image. Automated tests do not push images to the registry on their own. <a href="/docker-hub/builds/automated-testing/">Learn more about automated image testing here.</a></p>

<p>Depending on your <a href="https://www.docker.com/pricing" target="_blank" rel="noopener" class="_">plan</a>, you may get concurrent builds, which means that <code class="highlighter-rouge">N</code>
autobuilds can be run at the same time. <code class="highlighter-rouge">N</code> is configured by the plan that you
subscribe to. Once <code class="highlighter-rouge">N+1</code> builds are running, any additional builds are
queued to be run later.</p>

<blockquote>
  <p><strong>Note</strong></p>

  <p>The total number of pending builds in the queue is limited to 30 and further requests will be discarded. The number of concurrent builds for Pro is 5 and for Team is 15.</p>
</blockquote>

<p><img src="/docker-hub/builds/images/index-dashboard.png" alt="An automated build dashboard" /></p>

<h2 id="configure-automated-build-settings">Configure automated build settings</h2>

<p>You can configure repositories in Docker Hub so that they automatically
build an image each time you push new code to your source provider. If you have
<a href="/docker-hub/builds/automated-testing/">automated tests</a> configured, the new image is only pushed
when the tests succeed.</p>

<p>Builds can be added to existing repositories, or added when you create a repository.</p>

<ol>
  <li>
    <p>From the <strong>Repositories</strong> section, click into a repository to view its details.</p>
  </li>
  <li>
    <p>Click the <strong>Builds</strong> tab.</p>
  </li>
  <li>
    <p>If you are setting up automated builds for the first time, select
the code repository service (GitHub or Bitbucket) where the image’s source code is stored.
You might redirected to the settings page to <a href="/docker-hub/builds/link-source/">link</a> the code repository service.</p>

    <p>Otherwise, if you are editing the build settings for an existing automated
 build, click <strong>Configure automated builds</strong>.</p>
  </li>
  <li>
    <p>Select the <strong>source repository</strong> to build the Docker images from.</p>

    <p>You might need to specify an organization or user (the <em>namespace</em>) from the
 source code provider. Once you select a namespace, its source code
 repositories appear in the <strong>Select repository</strong> dropdown list.</p>
  </li>
  <li>
    <p>Optionally, enable <a href="/docker-hub/builds/automated-testing/#enable-automated-tests-on-a-repository">autotests</a>.</p>
  </li>
  <li>
    <p>Review the default <strong>Build Rules</strong>, and optionally click the
<strong>plus sign</strong> to add and configure more build rules.</p>

    <p><em>Build rules</em> control what Docker Hub builds into images from the contents
of the source code repository, and how the resulting images are tagged
within the Docker repository.</p>

    <p>A default build rule is set up for you, which you can edit or delete. This
default set builds from the <code class="highlighter-rouge">Branch</code> in your source code repository called
<code class="highlighter-rouge">master</code>, and creates a Docker image tagged with <code class="highlighter-rouge">latest</code>.</p>
  </li>
  <li>
    <p>For each branch or tag, enable or disable the <strong>Autobuild</strong> toggle.</p>

    <p>Only branches or tags with autobuild enabled are built, tested, <em>and</em> have
the resulting image pushed to the repository. Branches with autobuild
disabled are built for test purposes (if enabled at the repository
level), but the built Docker image is not pushed to the repository.</p>
  </li>
  <li>
    <p>For each branch or tag, enable or disable the <strong>Build Caching</strong> toggle.</p>

    <p><a href="/develop/develop-images/dockerfile_best-practices/#leverage-build-cache">Build caching</a> can save time if you are building a large image frequently or have
 many dependencies. You might want to leave build caching disabled to
 make sure all of your dependencies are resolved at build time, or if
 you have a large layer that is quicker to build locally.</p>
  </li>
  <li>
    <p>Click <strong>Save</strong> to save the settings, or click <strong>Save and build</strong> to save and
run an initial test.</p>

    <p>A webhook is automatically added to your source code repository to notify
 Docker Hub on every push. Only pushes to branches that are listed as the
 source for one or more tags trigger a build.</p>
  </li>
</ol>

<h3 id="set-up-build-rules">Set up build rules</h3>

<p>By default when you set up automated builds, a basic build rule is created for you.
This default rule watches for changes to the <code class="highlighter-rouge">master</code> branch in your source code
repository, and builds the <code class="highlighter-rouge">master</code> branch into a Docker image tagged with
<code class="highlighter-rouge">latest</code>.</p>

<p>In the <strong>Build Rules</strong> section, enter one or more sources to build.</p>

<p>For each source:</p>

<ul>
  <li>
    <p>Select the <strong>Source type</strong> to build either a <strong>tag</strong> or a
  <strong>branch</strong>. This tells the build system what to look for in the source code
  repository.</p>
  </li>
  <li>
    <p>Enter the name of the <strong>Source</strong> branch or tag you want to build.</p>

    <p>The first time you configure automated builds, a default build rule is set up
for you. This default set builds from the <code class="highlighter-rouge">Branch</code> in your source code called
<code class="highlighter-rouge">master</code>, and creates a Docker image tagged with <code class="highlighter-rouge">latest</code>.</p>

    <p>You can also use a regex to select which source branches or tags to build.
To learn more, see
<a href="/docker-hub/builds/#regexes-and-automated-builds">regexes</a>.</p>
  </li>
  <li>
    <p>Enter the tag to apply to Docker images built from this source.</p>

    <p>If you configured a regex to select the source, you can reference the
capture groups and use its result as part of the tag. To learn more, see
<a href="/docker-hub/builds/#regexes-and-automated-builds">regexes</a>.</p>
  </li>
  <li>
    <p>Specify the <strong>Dockerfile location</strong> as a path relative to the root of the source code repository. (If the Dockerfile is at the repository root, leave this path set to <code class="highlighter-rouge">/</code>.)</p>
  </li>
</ul>

<blockquote>
  <p><strong>Note</strong></p>

  <p>When Docker Hub pulls a branch from a source code repository, it performs a shallow clone (only the tip of the specified branch).  Refer to <a href="/docker-hub/builds/advanced/">Advanced options for Autobuild and Autotest</a> for more information.</p>
</blockquote>

<h3 id="environment-variables-for-builds">Environment variables for builds</h3>

<p>You can set the values for environment variables used in your build processes
when you configure an automated build. Add your build environment variables by
clicking the plus sign next to the <strong>Build environment variables</strong> section, and
then entering a variable name and the value.</p>

<p>When you set variable values from the Docker Hub UI, they can be used by the
commands you set in <code class="highlighter-rouge">hooks</code> files, but they are stored so that only users who
have <code class="highlighter-rouge">admin</code> access to the Docker Hub repository can see their values. This
means you can use them to safely store access tokens or other information that
should remain secret.</p>

<blockquote>
  <p><strong>Note</strong>: The variables set on the build configuration screen are used during
the build processes <em>only</em> and should not be confused with the environment
values used by your service (for example to create service links).</p>
</blockquote>

<h2 id="check-your-active-builds">Check your active builds</h2>

<p>A summary of a repository’s builds appears both on the repository <strong>General</strong>
tab, and in the <strong>Builds</strong> tab. The <strong>Builds</strong> tab also displays a color coded
bar chart of the build queue times and durations. Both views display the
pending, in progress, successful, and failed builds for any tag of the
repository.</p>

<p><img src="/docker-hub/builds/images/index-active.png" alt="Active Builds" /></p>

<p>From either location, you can click a build job to view its build report. The
build report shows information about the build job including the source
repository and branch (or tag), the build duration, creation time and location,
and the user namespace the build occurred in.</p>

<p><img src="/docker-hub/builds/images/index-report.png" alt="Build Report" /></p>

<h2 id="cancel-or-retry-a-build">Cancel or retry a build</h2>

<p>While a build is queued or running, a <strong>Cancel</strong> icon appears next to its build
report link on the General tab and on the Builds tab. You can also click the
<strong>Cancel</strong> button from the build report page, or from the Timeline tab’s logs
display for the build.</p>

<p><img src="/docker-hub/builds/images/build-cancelicon.png" alt="list of builds showing the cancel icon" /></p>

<p>If a build fails, a <strong>Retry</strong> icon appears next to the build report line on the
General and Builds tabs, and the build report page and Timeline logs also
display a <strong>Retry</strong> button.</p>

<p><img src="/docker-hub/builds/images/retry-build.png" alt="Timeline view showing the retry build button" /></p>

<blockquote>
  <p><strong>Note</strong></p>

  <p>If you are viewing the build details for a repository that belongs
to an Organization, the Cancel and Retry buttons only appear if you have <code class="highlighter-rouge">Read &amp; Write</code> access to the repository.</p>
</blockquote>

<h2 id="disable-an-automated-build">Disable an automated build</h2>

<p>Automated builds are enabled per branch or tag, and can be disabled and
re-enabled easily. You might do this when you want to only build manually for
a while, for example when you are doing major refactoring in your code. Disabling
autobuilds does not disable <a href="/docker-hub/builds/automated-testing/">autotests</a>.</p>

<p>To disable an automated build:</p>

<ol>
  <li>
    <p>From the <strong>Repositories</strong> page, click into a repository, and click the <strong>Builds</strong> tab.</p>
  </li>
  <li>
    <p>Click <strong>Configure automated builds</strong> to edit the repository’s build settings.</p>
  </li>
  <li>
    <p>In the <strong>Build Rules</strong> section, locate the branch or tag you no longer want
to automatically build.</p>
  </li>
  <li>
    <p>Click the <strong>autobuild</strong> toggle next to the configuration line.</p>

    <p>The toggle turns gray when disabled.</p>
  </li>
  <li>
    <p>Click <strong>Save</strong> to save your changes.</p>
  </li>
</ol>

<h2 id="advanced-automated-build-options">Advanced automated build options</h2>

<p>At the minimum you need a build rule composed of a source branch (or tag) and
destination Docker tag to set up an automated build. You can also change where
the build looks for the Dockerfile, set a path to the files the build use
(the build context), set up multiple static tags or branches to build from, and
use regular expressions (regexes) to dynamically select source code to build and
create dynamic tags.</p>

<p>All of these options are available from the <strong>Build configuration</strong> screen for
each repository. Click <strong>Repositories</strong> from the left navigation, click the name
of the repository you want to edit, click the <strong>Builds</strong> tab, and click
<strong>Configure Automated builds</strong>.</p>

<h3 id="tag-and-branch-builds">Tag and Branch builds</h3>

<p>You can configure your automated builds so that pushes to specific branches or tags triggers a build.</p>

<ol>
  <li>
    <p>In the <strong>Build Rules</strong> section, click the plus sign to add more sources to build.</p>
  </li>
  <li>
    <p>Select the <strong>Source type</strong> to build: either a <strong>tag</strong> or a <strong>branch</strong>.</p>

    <p>This tells the build system what type of source to look for in the code
repository.</p>
  </li>
  <li>
    <p>Enter the name of the <strong>Source</strong> branch or tag you want to build.</p>

    <p>You can enter a name, or use a regex to match which source branch or tag
 names to build. To learn more, see
 <a href="/docker-hub/builds/#regexes-and-automated-builds">regexes</a>.</p>
  </li>
  <li>
    <p>Enter the tag to apply to Docker images built from this source.</p>

    <p>If you configured a regex to select the source, you can reference the
 capture groups and use its result as part of the tag. To learn more, see
 <a href="/docker-hub/builds/#regexes-and-automated-builds">regexes</a>.</p>
  </li>
  <li>
    <p>Repeat steps 2 through 4 for each new build rule you set up.</p>
  </li>
</ol>

<h3 id="set-the-build-context-and-dockerfile-location">Set the build context and Dockerfile location</h3>

<p>Depending on how the files are arranged in your source code repository, the
files required to build your images may not be at the repository root. If that’s
the case, you can specify a path where the build looks for the files.</p>

<p>The <em>build context</em> is the path to the files needed for the build, relative to the root of the repository. Enter the path to these files in the <strong>Build context</strong> field. Enter <code class="highlighter-rouge">/</code> to set the build context as the root of the source code repository.</p>

<blockquote>
  <p><strong>Note</strong></p>

  <p>If you delete the default path <code class="highlighter-rouge">/</code> from the <strong>Build context</strong> field and leave it blank, the build system uses the path to the Dockerfile as the build context. However, to avoid confusion we recommend that you specify the complete path.</p>
</blockquote>

<p>You can specify the <strong>Dockerfile location</strong> as a path relative to the build
context. If the Dockerfile is at the root of the build context path, leave the
Dockerfile path set to <code class="highlighter-rouge">/</code>. (If the build context field is blank, set the path
to the Dockerfile from the root of the source repository.)</p>

<h3 id="regexes-and-automated-builds">Regexes and automated builds</h3>

<p>You can specify a regular expression (regex) so that only matching branches or
tags are built. You can also use the results of the regex to create the Docker
tag that is applied to the built image.</p>

<p>You can use up to nine regular expression capture groups
(expressions enclosed in parentheses) to select a source to build, and reference
these in the <strong>Docker Tag</strong> field using <code class="highlighter-rouge">{\1}</code> through <code class="highlighter-rouge">{\9}</code>.</p>

<!-- Capture groups Not a priority
#### Regex example: build from version number branch and tag with version number

You could also use capture groups to build and label images that come from various sources. For example, you might have

`/(alice|bob)-v([0-9.]+)/` -->

<h3 id="build-images-with-buildkit">Build images with BuildKit</h3>

<p>You can enable the BuildKit builder by setting the <code class="highlighter-rouge">DOCKER_BUILDKIT=1</code>
<a href="#environment-variables-for-builds">environment variable</a> in the
<a href="#configure-automated-build-settings">Configure automated build settings</a> section.
Refer to the <a href="/develop/develop-images/build_enhancements/">build images with BuildKit</a>
page for more information on BuildKit.</p>

<blockquote>
  <p><strong>Note</strong></p>

  <p>Autobuilds use the buildKit build-system by default. If you want to use the legacy Docker build-system, add the <a href="/docker-hub/builds/#environment-variables-for-builds" target="_blank" rel="noopener" class="_">environment variable</a> DOCKER_BUILDKIT=0.</p>
</blockquote>

<h2 id="build-repositories-with-linked-private-submodules">Build repositories with linked private submodules</h2>

<p>Docker Hub sets up a deploy key in your source code repository that allows it
to clone the repository and build it; however this key only works for a single,
specific code repository. If your source code repository uses private Git
submodules (or requires that you clone other private repositories to build),
Docker Hub cannot access these additional repos, your build cannot complete,
and an error is logged in your build timeline.</p>

<p>To work around this, you can set up your automated build using the <code class="highlighter-rouge">SSH_PRIVATE</code> environment variable to override the deployment key and grant Docker Hub’s build system access to the repositories.</p>

<blockquote>
  <p><strong>Note</strong></p>

  <p>If you are using autobuild for teams, use <a href="/docker-hub/builds/#service-users-for-team-autobuilds">the process below</a> instead, and configure a service user for your source code provider. You can also do this for an individual account to limit Docker Hub’s access to your source repositories.</p>
</blockquote>

<ol>
  <li>
    <p>Generate a SSH keypair that you use for builds only, and add the public key to your source code provider account.</p>

    <p>This step is optional, but allows you to revoke the build-only keypair without removing other access.</p>
  </li>
  <li>Copy the private half of the keypair to your clipboard.</li>
  <li>In Docker Hub, navigate to the build page for the repository that has linked private submodules. (If necessary, follow the steps <a href="/docker-hub/builds/#configure-automated-build-settings">here</a> to configure the automated build.)</li>
  <li>At the bottom of the screen, click the plus sign ( <strong>+</strong> ) next to <strong>Build Environment variables</strong>.</li>
  <li>Enter <code class="highlighter-rouge">SSH_PRIVATE</code> as the name for the new environment variable.</li>
  <li>Paste the private half of the keypair into the <strong>Value</strong> field.</li>
  <li>Click <strong>Save</strong>, or <strong>Save and Build</strong> to validate that the build now completes.</li>
</ol>

<blockquote>
  <p><strong>Note</strong></p>

  <p>You must configure your private git submodules using git clone over SSH (<code class="highlighter-rouge">git@submodule.tld:some-submodule.git</code>) rather than HTTPS.</p>
</blockquote>

<h2 id="autobuild-for-teams">Autobuild for Teams</h2>

<p>When you create an automated build repository in your own account namespace, you can start, cancel, and retry builds, and edit and delete your own repositories.</p>

<p>These same actions are also available for team repositories from Docker Hub if
you are a member of the Organization’s <code class="highlighter-rouge">Owners</code> team. If you are a member of a
team with <code class="highlighter-rouge">write</code> permissions you can start, cancel, and retry builds in your
team’s repositories, but you cannot edit the team repository settings or delete
the team repositories. If your user account has <code class="highlighter-rouge">read</code> permission, or if you’re
a member of a team with <code class="highlighter-rouge">read</code> permission, you can view the build configuration
including any testing settings.</p>

<table>
  <thead>
    <tr>
      <th>Action/Permission</th>
      <th>read</th>
      <th>write</th>
      <th>admin</th>
      <th>owner</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>view build details</td>
      <td>x</td>
      <td>x</td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>start, cancel, retry</td>
      <td> </td>
      <td>x</td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>edit build settings</td>
      <td> </td>
      <td> </td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>delete build</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>x</td>
    </tr>
  </tbody>
</table>

<h3 id="service-users-for-team-autobuilds">Service users for team autobuilds</h3>

<blockquote>
  <p><strong>Note</strong>: Only members of the <code class="highlighter-rouge">Owners</code> team can set up automated builds for teams.</p>
</blockquote>

<p>When you set up automated builds for teams, you grant Docker Hub access to
your source code repositories using OAuth tied to a specific user account. This
means that Docker Hub has access to everything that the linked source provider
account can access.</p>

<p>For organizations and teams, we recommend creating a dedicated service account
(or “machine user”) to grant access to the source provider. This ensures that no
builds break as individual users’ access permissions change, and that an
individual user’s personal projects are not exposed to an entire organization.</p>

<p>This service account should have access to any repositories to be built,
and must have administrative access to the source code repositories so it can
manage deploy keys. If needed, you can limit this account to only a specific
set of repositories required for a specific build.</p>

<p>If you are building repositories with linked private submodules (private
dependencies), you also need to add an override <code class="highlighter-rouge">SSH_PRIVATE</code> environment
variable to automated builds associated with the account.</p>

<ol>
  <li>Create a service user account on your source provider, and generate SSH keys for it.</li>
  <li>Create a “build” team in your organization.</li>
  <li>
    <p>Ensure that the new “build” team has access to each repository and submodule you need to build.</p>

    <p>Go to the repository’s <strong>Settings</strong> page. On GitHub, add the new “build” team to the list of <strong>Collaborators and Teams</strong>. On Bitbucket, add the “build” team to the list of approved users on the <strong>Access management</strong> screen.</p>
  </li>
  <li>
    <p>Add the service user to the “build” team on the source provider.</p>
  </li>
  <li>
    <p>Log in to Docker Hub as a member of the <code class="highlighter-rouge">Owners</code> team, switch to the organization, and follow the instructions to <a href="/docker-hub/builds/link-source/">link to source code repository</a> using the service account.</p>

    <blockquote>
      <p><strong>Note</strong>: You may need to log out of your individual account on the source code provider to create the link to the service account.</p>
    </blockquote>
  </li>
  <li>Optionally, use the SSH keys you generated to set up any builds with private submodules, using the service account and <a href="/docker-hub/builds/#build-repositories-with-linked-private-submodules">the instructions above</a>.</li>
</ol>

<h2 id="whats-next">What’s Next?</h2>

<h3 id="customize-your-build-process">Customize your build process</h3>

<p>Additional advanced options are available for customizing your automated builds,
including utility environment variables, hooks, and build phase overrides. To
learn more see <a href="/docker-hub/builds/advanced/">Advanced options for Autobuild and Autotest</a>.</p>

<h3 id="add-automated-tests">Add automated tests</h3>

<p>To test your code before the image is pushed, you can use
Docker Hub’s <a href="/docker-hub/builds/automated-testing/">Autotest</a> feature which
integrates seamlessly with autobuild and autoredeploy.</p>

<blockquote>
  <p><strong>Note</strong></p>

  <p>While the Autotest feature builds an image for testing purposes, it
does not push the resulting image to Docker Hub.</p>
</blockquote>
<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="/search/?q=automated">automated</a>, <a href="/search/?q=build">build</a>, <a href="/search/?q=images">images</a>, <a href="/search/?q=Docker Hub">Docker Hub</a></span><div class="ratings-div"><div id="pd_rating_holder_8453675"></div></div></section>
                    </main>
                    <nav class="col-nav">
                        <div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
                            <div id="navbar" class="nav-sidebar">
                                <ul class="nav hidden-md hidden-lg"></ul>
                                <ul class="nav" id="jsTOCLeftNav"></ul>
                            </div>
                        </div>
                    </nav>
                    <div class="col-toc">
                        <div class="sidebar hidden-xs hidden-sm">
                            <div class="toc-nav">
                                <div class="feedback-links">
                                    <ul><li><a href="https://github.com/docker/docker.github.io/edit/master/docker-hub/builds/index.md"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit this page</a></li><li><a href="https://github.com/docker/docker.github.io/issues/new?body=File: [docker-hub/builds/index.md](https://docs.docker.com/docker-hub/builds/)" class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> Request docs changes</a></li>
                                        <li><div class="toggle-mode">
  <div class="icon">
      <i class="fa fa-sun-o" aria-hidden="true"></i>
  </div>
  <div class="toggle-switch">
      <label class="switch">
          <input type="checkbox" id="switch-style">
          <span class="slider round"></span>
      </label>
  </div>
  <div class="icon">
      <i class="fa fa-moon-o" aria-hidden="true"></i>
  </div>
</div>
</li>
                                    </ul>
                                </div><div id="side-toc-title">On this page:</div>
<ul id="my_toc" class="inline_toc">
  <li><a href="#how-automated-builds-work" class="nomunge">How Automated Builds work</a></li>
  <li><a href="#configure-automated-build-settings" class="nomunge">Configure automated build settings</a>
    <ul>
      <li><a href="#set-up-build-rules" class="nomunge">Set up build rules</a></li>
      <li><a href="#environment-variables-for-builds" class="nomunge">Environment variables for builds</a></li>
    </ul>
  </li>
  <li><a href="#check-your-active-builds" class="nomunge">Check your active builds</a></li>
  <li><a href="#cancel-or-retry-a-build" class="nomunge">Cancel or retry a build</a></li>
  <li><a href="#disable-an-automated-build" class="nomunge">Disable an automated build</a></li>
  <li><a href="#advanced-automated-build-options" class="nomunge">Advanced automated build options</a>
    <ul>
      <li><a href="#tag-and-branch-builds" class="nomunge">Tag and Branch builds</a></li>
      <li><a href="#set-the-build-context-and-dockerfile-location" class="nomunge">Set the build context and Dockerfile location</a></li>
      <li><a href="#regexes-and-automated-builds" class="nomunge">Regexes and automated builds</a></li>
      <li><a href="#build-images-with-buildkit" class="nomunge">Build images with BuildKit</a></li>
    </ul>
  </li>
  <li><a href="#build-repositories-with-linked-private-submodules" class="nomunge">Build repositories with linked private submodules</a></li>
  <li><a href="#autobuild-for-teams" class="nomunge">Autobuild for Teams</a>
    <ul>
      <li><a href="#service-users-for-team-autobuilds" class="nomunge">Service users for team autobuilds</a></li>
    </ul>
  </li>
  <li><a href="#whats-next" class="nomunge">What’s Next?</a>
    <ul>
      <li><a href="#customize-your-build-process" class="nomunge">Customize your build process</a></li>
      <li><a href="#add-automated-tests" class="nomunge">Add automated tests</a></li>
    </ul>
  </li>
</ul>

</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer">
          
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/why-docker">Why Docker?</a></b></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container?</a></li>
                        <li><a href="https://docker.events.cube365.net/dockercon/">DockerCon</a></li>
                        <li><b><a href="https://www.docker.com/products/overview">Products</a></b></li>
                        <li><a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a></li>
                        <li><a href="https://www.docker.com/products/docker-hub">Docker Hub</a></li>
                        <li><a href="https://www.docker.com/roadmap">Docker Product Roadmap</a></li>
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Features</a></b></li>
                        <li><a href="https://www.docker.com/products/container-runtime">Container Runtime</a></li>
                        <li><a href="https://www.docker.com/products/developer-tools">Developer Tools</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Developers</a></b></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/open-source">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Pricing</a></b></li>
                        <li><a href="https://www.docker.com/pricing/faq">FAQs</a></li>
                        <li><a href="https://www.docker.com/partners/programs">Docker Verified Publisher Program</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/company" target="_blank" rel="noopener">Company</a></b></li>
                        <li><a href="https://www.docker.com/company">About Us</a></li>
                        <li><a href="https://www.docker.com/blog/" target="_blank" rel="noopener">Blog</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners">Partners</a></li>
                        <li><a href="https://www.docker.com/company/newsroom">Newsroom</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact Us</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2013-2021 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-slideshare"><a href="https://www.slideshare.net/docker">Slideshare</a></li>
                    <li class="fa fa-reddit"><a href="https://www.reddit.com/r/docker">Reddit</a></li>
                </ul>
            </div>
        </div>
    </div>

    </footer>
    <script>const pageURL = "/docker-hub/builds/";</script><script>
    let PDRTJS_settings_8453675 = {
        "id": "8453675",
        "unique_id": "docker-hub/builds/index.md",
        "title": "Set up Automated Builds",
        "font_family": "Open Sans, sans serif",
        "font_color": "b9c2cc",
        "font_align": "center",
        "permalink": "https://github.com/docker/docker.github.io/blob/master/docker-hub/builds/index.md"
    };
    (function (d, c, j) {
        if (!document.getElementById(j)) {
            let pd=d.createElement(c),s;pd.id=j;pd.src='https://polldaddy.com/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd, s);
        }
    }(document, 'script', 'pd-rating-js'));
</script></body>
</html>

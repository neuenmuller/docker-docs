<!-- Page generated 2021-11-17 12:37:13 +0000-->
<!DOCTYPE html>
<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WL2QLG5');</script>
<title>Image Manifest V 2, Schema 2  | Docker Documentation</title>
  <meta name="description" content="image manifest for the Registry." />
  <meta name="keywords" content="registry, on-prem, images, tags, repository, distribution, api, advanced, manifest">
  <link rel="canonical" href="https://docs.docker.com/registry/spec/manifest-v2-2/" />

  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/favicons/docs@2x.ico" sizes="129x128">
  <link rel="apple-touch-icon" type="image/x-icon" href="/favicons/docs@2x.ico" sizes="129x128">
  <meta name="msapplication-TileImage" content="/favicons/docs@2x.ico">
  <meta property="og:image" content="/favicons/docs@2x.ico"/>
  <meta name="theme-color" content="#2496ed" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- hide elements that are only shown without JavaScript enabled -->
  <script>document.documentElement.classList.add('js')</script>
  <style>html.js .no-js { display: none !important; }</style><script defer src="/js/theme-switcher.js"></script>
  <script defer src="/js/anchorlinks.js"></script>
  <script defer src="/js/jquery.js"></script>
  <script defer src="/js/bootstrap.min.js"></script>
  <script defer src="/js/docs.js"></script><script defer src="/js/search.js"></script><link rel="preload" as="font" href="https://fonts.gstatic.com/s/opensans/v18/mem8YaGs126MiZpBA-UFVZ0bf8pkAg.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/fonts/geomanist/hinted-Geomanist-Book.woff2"    type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/fonts/geomanist/hinted-Geomanist-Regular.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/fonts/glyphicons-halflings-regular.woff2"       type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/fonts/fontawesome-webfont.woff2?v=4.7.0"        type="font/woff2" crossorigin="anonymous">

  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css" id="pagestyle">

  <!-- SEO stuff -->
  <meta name="twitter:title" itemprop="title name" content="Image Manifest V 2, Schema 2 "/>
  <meta name="twitter:description" property="og:description" itemprop="description" content="" />
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:domain" content="docs.docker.com"/>
  <meta name="twitter:site" content="@docker_docs"/>
  <meta name="twitter:url" content="https://twitter.com/docker_docs"/>
  <meta name="twitter:image:src" content="https://docs.docker.com/images/docs@2x.png"/>
  <meta name="twitter:image:alt" content="Docker Documentation"/>
  <meta property="og:title" content="Image Manifest V 2, Schema 2 " />
  <meta property="og:description" content="image manifest for the Registry." />
  <meta property="og:type" content="website"/>
  <meta property="og:updated_time" itemprop="dateUpdated" content="2021-11-17T12:37:13+00:00"/>
  <meta property="og:image" itemprop="image primaryImageOfPage" content="https://docs.docker.com/images/docs@2x.png"/>
  <meta property="og:locale" content="en_US" />
  <meta property="og:url" content="https://docs.docker.com/registry/spec/manifest-v2-2/" />
  <meta property="og:site_name" content="Docker Documentation" />
  <meta property="article:published_time" itemprop="datePublished" content="2021-11-17T12:37:13+00:00"/>
  <script type="application/ld+json">{"@context":"http://schema.org","@type":"WebPage","headline":"Image Manifest V 2, Schema 2 ","description":"image manifest for the Registry.","url":"https://docs.docker.com/registry/spec/manifest-v2-2/"}</script>
  <!-- END SEO STUFF -->
</head>
<body class="colums">
    <header>
        <nav class="nav-secondary navbar navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/">
                <img class="logo" src="/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs" width="160" height="28" />
            </a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="logo-mobile">
    <a href="/">
        <img src="/images/docker-icon.svg" alt="Docker Docs" title="Docker Docs" width="30" height="30" />
    </a>
</div>
<div class="search-form" id="search-div">
    <form class="search-form form-inline" id="searchForm" action="/search/" method="get">
        <label for="st-search-input" class="sr-only">Search</label>
        <input class="search-field form-control ds-input" id="st-search-input" name="q" placeholder="Search the docs" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteResults"></div>
        <!-- <button type="submit" class="search-submit btn btn-default">Search</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container hidden-sm hidden-xs">
    <div>
        <ul class="nav navbar-nav"><li><a href="/" id="home">Home</a></li><li><a href="/get-started/overview/" id="guides">Guides</a></li><li><a href="/desktop/" id="manuals">Manuals</a></li><li><a href="/reference/" id="reference">Reference</a></li><li><a href="/samples/" id="samples">Samples</a></li></ul>
    </div>
    <div class="ctrl-right">
        <a href="javascript:void(0)" id="menu-toggle" aria-label="Current page's menu toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
    </div>
</div>
<div class="row hidden-sm hidden-xs">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li><a href="/" title="Docker docs homepage"><i class="fa fa-home"></i></a></li>
            <li><a href="/reference/">Reference</a></li><li><a>Drivers and specifications</a></li><li><a href="/registry/spec/manifest-v2-1/">Registry image manifests</a></li><li><a href="/registry/spec/manifest-v2-2/">Image manifest v 2, schema 2</a></li></ol>
    </nav>
</div></div>
    </div>
</nav>

    </header>
    <div class="wrapper right-open">
        <div class="container-fluid">
            <div class="row">
                <div class="col-body">
                    <main class="col-content content">
                        <section class="section"><h1>Image Manifest V 2, Schema 2 </h1><p><em class="reading-time">Estimated reading time: 9 minutes</em></p><h1 id="image-manifest-version-2-schema-2">Image Manifest Version 2, Schema 2</h1>

<p>This document outlines the format of the V2 image manifest, schema version 2.
The original (and provisional) image manifest for V2 (schema 1), was introduced
in the Docker daemon in the <a href="https://github.com/docker/docker/commit/9f482a66ab37ec396ac61ed0c00d59122ac07453">v1.3.0
release</a>
and is specified in the <a href="/registry/spec/manifest-v2-1/">schema 1 manifest definition</a></p>

<p>This second schema version has two primary goals. The first is to allow
multi-architecture images, through a “fat manifest” which references image
manifests for platform-specific versions of an image. The second is to
move the Docker engine towards content-addressable images, by supporting
an image model where the image’s configuration can be hashed to generate
an ID for the image.</p>

<h1 id="media-types">Media Types</h1>

<p>The following media types are used by the manifest formats described here, and
the resources they reference:</p>

<ul>
  <li><code class="highlighter-rouge">application/vnd.docker.distribution.manifest.v1+json</code>: schema1 (existing manifest format)</li>
  <li><code class="highlighter-rouge">application/vnd.docker.distribution.manifest.v2+json</code>: New image manifest format (schemaVersion = 2)</li>
  <li><code class="highlighter-rouge">application/vnd.docker.distribution.manifest.list.v2+json</code>: Manifest list, aka “fat manifest”</li>
  <li><code class="highlighter-rouge">application/vnd.docker.container.image.v1+json</code>: Container config JSON</li>
  <li><code class="highlighter-rouge">application/vnd.docker.image.rootfs.diff.tar.gzip</code>: “Layer”, as a gzipped tar</li>
  <li><code class="highlighter-rouge">application/vnd.docker.image.rootfs.foreign.diff.tar.gzip</code>: “Layer”, as a gzipped tar that should never be pushed</li>
  <li><code class="highlighter-rouge">application/vnd.docker.plugin.v1+json</code>: Plugin config JSON</li>
</ul>

<h2 id="manifest-list">Manifest List</h2>

<p>The manifest list is the “fat manifest” which points to specific image manifests
for one or more platforms. Its use is optional, and relatively few images will
use one of these manifests. A client will distinguish a manifest list from an
image manifest based on the Content-Type returned in the HTTP response.</p>

<h2 id="manifest-list-field-descriptions"><em>Manifest List</em> Field Descriptions</h2>

<ul>
  <li>
    <p><strong><code class="highlighter-rouge">schemaVersion</code></strong> <em>int</em></p>

    <p>This field specifies the image manifest schema version as an integer. This
schema uses the version <code class="highlighter-rouge">2</code>.</p>
  </li>
  <li>
    <p><strong><code class="highlighter-rouge">mediaType</code></strong> <em>string</em></p>

    <p>The MIME type of the manifest list. This should be set to
  <code class="highlighter-rouge">application/vnd.docker.distribution.manifest.list.v2+json</code>.</p>
  </li>
  <li>
    <p><strong><code class="highlighter-rouge">manifests</code></strong> <em>array</em></p>

    <p>The manifests field contains a list of manifests for specific platforms.</p>

    <p>Fields of an object in the manifests list are:</p>

    <ul>
      <li>
        <p><strong><code class="highlighter-rouge">mediaType</code></strong> <em>string</em></p>

        <p>The MIME type of the referenced object. This will generally be
  <code class="highlighter-rouge">application/vnd.docker.distribution.manifest.v2+json</code>, but it could also
  be <code class="highlighter-rouge">application/vnd.docker.distribution.manifest.v1+json</code> if the manifest
  list references a legacy schema-1 manifest.</p>
      </li>
      <li>
        <p><strong><code class="highlighter-rouge">size</code></strong> <em>int</em></p>

        <p>The size in bytes of the object. This field exists so that a client
  will have an expected size for the content before validating. If the
  length of the retrieved content does not match the specified length,
  the content should not be trusted.</p>
      </li>
      <li>
        <p><strong><code class="highlighter-rouge">digest</code></strong> <em>string</em></p>

        <p>The digest of the content, as defined by the
  <a href="/registry/spec/api/#digest-parameter">Registry V2 HTTP API Specificiation</a>.</p>
      </li>
      <li>
        <p><strong><code class="highlighter-rouge">platform</code></strong> <em>object</em></p>

        <p>The platform object describes the platform which the image in the
  manifest runs on. A full list of valid operating system and architecture
  values are listed in the <a href="https://golang.org/doc/install/source#environment">Go language documentation for <code class="highlighter-rouge">$GOOS</code> and
  <code class="highlighter-rouge">$GOARCH</code></a></p>

        <ul>
          <li>
            <p><strong><code class="highlighter-rouge">architecture</code></strong> <em>string</em></p>

            <p>The architecture field specifies the CPU architecture, for example
  <code class="highlighter-rouge">amd64</code> or <code class="highlighter-rouge">ppc64le</code>.</p>
          </li>
          <li>
            <p><strong><code class="highlighter-rouge">os</code></strong> <em>string</em></p>

            <p>The os field specifies the operating system, for example
  <code class="highlighter-rouge">linux</code> or <code class="highlighter-rouge">windows</code>.</p>
          </li>
          <li>
            <p><strong><code class="highlighter-rouge">os.version</code></strong> <em>string</em></p>

            <p>The optional os.version field specifies the operating system version,
  for example <code class="highlighter-rouge">10.0.10586</code>.</p>
          </li>
          <li>
            <p><strong><code class="highlighter-rouge">os.features</code></strong> <em>array</em></p>

            <p>The optional os.features field specifies an array of strings,
  each listing a required OS feature (for example on Windows
  <code class="highlighter-rouge">win32k</code>).</p>
          </li>
          <li>
            <p><strong><code class="highlighter-rouge">variant</code></strong> <em>string</em></p>

            <p>The optional variant field specifies a variant of the CPU, for
  example <code class="highlighter-rouge">armv6l</code> to specify a particular CPU variant of the ARM CPU.</p>
          </li>
          <li>
            <p><strong><code class="highlighter-rouge">features</code></strong> <em>array</em></p>

            <p>The optional features field specifies an array of strings, each
  listing a required CPU feature (for example <code class="highlighter-rouge">sse4</code> or <code class="highlighter-rouge">aes</code>).</p>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="example-manifest-list">Example Manifest List</h2>

<p><em>Example showing a simple manifest list pointing to image manifests for two platforms:</em></p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"schemaVersion"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mediaType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/vnd.docker.distribution.manifest.list.v2+json"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"manifests"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"mediaType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/vnd.docker.distribution.manifest.v2+json"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">7143</span><span class="p">,</span><span class="w">
      </span><span class="s2">"digest"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256:e692418e4cbaf90ca69d05a66403747baa33ee08806650b51fab815ad7fc331f"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"platform"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"architecture"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ppc64le"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"os"</span><span class="p">:</span><span class="w"> </span><span class="s2">"linux"</span><span class="p">,</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"mediaType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/vnd.docker.distribution.manifest.v2+json"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">7682</span><span class="p">,</span><span class="w">
      </span><span class="s2">"digest"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256:5b0bcabd1ed22e9fb1310cf6c2dec7cdef19f0ad69efa1f392e94a4333501270"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"platform"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"architecture"</span><span class="p">:</span><span class="w"> </span><span class="s2">"amd64"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"os"</span><span class="p">:</span><span class="w"> </span><span class="s2">"linux"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"sse4"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h1 id="image-manifest">Image Manifest</h1>

<p>The image manifest provides a configuration and a set of layers for a container
image. It’s the direct replacement for the schema-1 manifest.</p>

<h2 id="image-manifest-field-descriptions"><em>Image Manifest</em> Field Descriptions</h2>

<ul>
  <li>
    <p><strong><code class="highlighter-rouge">schemaVersion</code></strong> <em>int</em></p>

    <p>This field specifies the image manifest schema version as an integer. This
schema uses version <code class="highlighter-rouge">2</code>.</p>
  </li>
  <li>
    <p><strong><code class="highlighter-rouge">mediaType</code></strong> <em>string</em></p>

    <p>The MIME type of the manifest. This should be set to
  <code class="highlighter-rouge">application/vnd.docker.distribution.manifest.v2+json</code>.</p>
  </li>
  <li>
    <p><strong><code class="highlighter-rouge">config</code></strong> <em>object</em></p>

    <p>The config field references a configuration object for a container, by
  digest. This configuration item is a JSON blob that the runtime uses
  to set up the container. This new schema uses a tweaked version
  of this configuration to allow image content-addressability on the
  daemon side.</p>

    <p>Fields of a config object are:</p>

    <ul>
      <li>
        <p><strong><code class="highlighter-rouge">mediaType</code></strong> <em>string</em></p>

        <p>The MIME type of the referenced object. This should generally be
  <code class="highlighter-rouge">application/vnd.docker.container.image.v1+json</code>.</p>
      </li>
      <li>
        <p><strong><code class="highlighter-rouge">size</code></strong> <em>int</em></p>

        <p>The size in bytes of the object. This field exists so that a client
  will have an expected size for the content before validating. If the
  length of the retrieved content does not match the specified length,
  the content should not be trusted.</p>
      </li>
      <li>
        <p><strong><code class="highlighter-rouge">digest</code></strong> <em>string</em></p>

        <p>The digest of the content, as defined by the
  <a href="/registry/spec/api/#digest-parameter">Registry V2 HTTP API Specificiation</a>.</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong><code class="highlighter-rouge">layers</code></strong> <em>array</em></p>

    <p>The layer list is ordered starting from the base image (opposite order of schema1).</p>

    <p>Fields of an item in the layers list are:</p>

    <ul>
      <li>
        <p><strong><code class="highlighter-rouge">mediaType</code></strong> <em>string</em></p>

        <p>The MIME type of the referenced object. This should
  generally be <code class="highlighter-rouge">application/vnd.docker.image.rootfs.diff.tar.gzip</code>.
  Layers of type
  <code class="highlighter-rouge">application/vnd.docker.image.rootfs.foreign.diff.tar.gzip</code> may be
  pulled from a remote location but they should never be pushed.</p>
      </li>
      <li>
        <p><strong><code class="highlighter-rouge">size</code></strong> <em>int</em></p>

        <p>The size in bytes of the object. This field exists so that a client
  will have an expected size for the content before validating. If the
  length of the retrieved content does not match the specified length,
  the content should not be trusted.</p>
      </li>
      <li>
        <p><strong><code class="highlighter-rouge">digest</code></strong> <em>string</em></p>

        <p>The digest of the content, as defined by the
  <a href="/registry/spec/api/#digest-parameter">Registry V2 HTTP API Specificiation</a>.</p>
      </li>
      <li>
        <p><strong><code class="highlighter-rouge">urls</code></strong> <em>array</em></p>

        <p>Provides a list of URLs from which the content may be fetched. Content
  must be verified against the <code class="highlighter-rouge">digest</code> and <code class="highlighter-rouge">size</code>. This field is
  optional and uncommon.</p>
      </li>
    </ul>
  </li>
</ul>

<h2 id="example-image-manifest">Example Image Manifest</h2>

<p><em>Example showing an image manifest:</em></p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"schemaVersion"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mediaType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/vnd.docker.distribution.manifest.v2+json"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"mediaType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/vnd.docker.container.image.v1+json"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">7023</span><span class="p">,</span><span class="w">
        </span><span class="s2">"digest"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256:b5b2b2c507a0944348e0303114d8d93aaaa081732b86451d9bce1f432a537bc7"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"layers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"mediaType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/vnd.docker.image.rootfs.diff.tar.gzip"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">32654</span><span class="p">,</span><span class="w">
            </span><span class="s2">"digest"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256:e692418e4cbaf90ca69d05a66403747baa33ee08806650b51fab815ad7fc331f"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"mediaType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/vnd.docker.image.rootfs.diff.tar.gzip"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">16724</span><span class="p">,</span><span class="w">
            </span><span class="s2">"digest"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256:3c3a4604a545cdc127456d94e421cd355bca5b528f4a9c1905b15da2eb4a4c6b"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"mediaType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/vnd.docker.image.rootfs.diff.tar.gzip"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">73109</span><span class="p">,</span><span class="w">
            </span><span class="s2">"digest"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256:ec4b8955958665577945c89419d1af06b5f7636b4ac3da7f12184802ad867736"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h1 id="backward-compatibility">Backward compatibility</h1>

<p>The registry will continue to accept uploads of manifests in both the old and
new formats.</p>

<p>When pushing images, clients which support the new manifest format should first
construct a manifest in the new format. If uploading this manifest fails,
presumably because the registry only supports the old format, the client may
fall back to uploading a manifest in the old format.</p>

<p>When pulling images, clients indicate support for this new version of the
manifest format by sending the
<code class="highlighter-rouge">application/vnd.docker.distribution.manifest.v2+json</code> and
<code class="highlighter-rouge">application/vnd.docker.distribution.manifest.list.v2+json</code> media types in an
<code class="highlighter-rouge">Accept</code> header when making a request to the <code class="highlighter-rouge">manifests</code> endpoint. Updated
clients should check the <code class="highlighter-rouge">Content-Type</code> header to see whether the manifest
returned from the endpoint is in the old format, or is an image manifest or
manifest list in the new format.</p>

<p>If the manifest being requested uses the new format, and the appropriate media
type is not present in an <code class="highlighter-rouge">Accept</code> header, the registry will assume that the
client cannot handle the manifest as-is, and rewrite it on the fly into the old
format. If the object that would otherwise be returned is a manifest list, the
registry will look up the appropriate manifest for the amd64 platform and
linux OS, rewrite that manifest into the old format if necessary, and return
the result to the client. If no suitable manifest is found in the manifest
list, the registry will return a 404 error.</p>

<p>One of the challenges in rewriting manifests to the old format is that the old
format involves an image configuration for each layer in the manifest, but the
new format only provides one image configuration. To work around this, the
registry will create synthetic image configurations for all layers except the
top layer. These image configurations will not result in runnable images on
their own, but only serve to fill in the parent chain in a compatible way.
The IDs in these synthetic configurations will be derived from hashes of their
respective blobs. The registry will create these configurations and their IDs
using the same scheme as Docker 1.10 when it creates a legacy manifest to push
to a registry which doesn’t support the new format.</p>
<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="/search/?q=registry">registry</a>, <a href="/search/?q=on-prem">on-prem</a>, <a href="/search/?q=images">images</a>, <a href="/search/?q=tags">tags</a>, <a href="/search/?q=repository">repository</a>, <a href="/search/?q=distribution">distribution</a>, <a href="/search/?q=api">api</a>, <a href="/search/?q=advanced">advanced</a>, <a href="/search/?q=manifest">manifest</a></span><div class="ratings-div"><div id="pd_rating_holder_8453675"></div></div></section>
                    </main>
                    <nav class="col-nav">
                        <div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
                            <div id="navbar" class="nav-sidebar">
                                <ul class="nav hidden-md hidden-lg"></ul>
                                <ul class="nav" id="jsTOCLeftNav"></ul>
                            </div>
                        </div>
                    </nav>
                    <div class="col-toc">
                        <div class="sidebar hidden-xs hidden-sm">
                            <div class="toc-nav">
                                <div class="feedback-links">
                                    <ul><li><a href="https://github.com/docker/distribution/tree/master/docs/spec"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit this page</a></li><li><a href="https://github.com/docker/docker.github.io/issues/new?body=File: [registry/spec/manifest-v2-2.md](https://docs.docker.com/registry/spec/manifest-v2-2/)" class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> Request docs changes</a></li>
                                        <li><div class="toggle-mode">
  <div class="icon">
      <i class="fa fa-sun-o" aria-hidden="true"></i>
  </div>
  <div class="toggle-switch">
      <label class="switch">
          <input type="checkbox" id="switch-style">
          <span class="slider round"></span>
      </label>
  </div>
  <div class="icon">
      <i class="fa fa-moon-o" aria-hidden="true"></i>
  </div>
</div>
</li>
                                    </ul>
                                </div><div id="side-toc-title">On this page:</div>
<ul id="my_toc" class="inline_toc">
  <li><a href="#manifest-list" class="nomunge">Manifest List</a></li>
  <li><a href="#manifest-list-field-descriptions" class="nomunge">Manifest List Field Descriptions</a></li>
  <li><a href="#example-manifest-list" class="nomunge">Example Manifest List</a></li>
  <li><a href="#image-manifest-field-descriptions" class="nomunge">Image Manifest Field Descriptions</a></li>
  <li><a href="#example-image-manifest" class="nomunge">Example Image Manifest</a></li>
</ul>

</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer">
          
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/why-docker">Why Docker?</a></b></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container?</a></li>
                        <li><a href="https://docker.events.cube365.net/dockercon/">DockerCon</a></li>
                        <li><b><a href="https://www.docker.com/products/overview">Products</a></b></li>
                        <li><a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a></li>
                        <li><a href="https://www.docker.com/products/docker-hub">Docker Hub</a></li>
                        <li><a href="https://www.docker.com/roadmap">Docker Product Roadmap</a></li>
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Features</a></b></li>
                        <li><a href="https://www.docker.com/products/container-runtime">Container Runtime</a></li>
                        <li><a href="https://www.docker.com/products/developer-tools">Developer Tools</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Developers</a></b></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/open-source">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Pricing</a></b></li>
                        <li><a href="https://www.docker.com/pricing/faq">FAQs</a></li>
                        <li><a href="https://www.docker.com/partners/programs">Docker Verified Publisher Program</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/company" target="_blank" rel="noopener">Company</a></b></li>
                        <li><a href="https://www.docker.com/company">About Us</a></li>
                        <li><a href="https://www.docker.com/blog/" target="_blank" rel="noopener">Blog</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners">Partners</a></li>
                        <li><a href="https://www.docker.com/company/newsroom">Newsroom</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact Us</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2013-2021 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-slideshare"><a href="https://www.slideshare.net/docker">Slideshare</a></li>
                    <li class="fa fa-reddit"><a href="https://www.reddit.com/r/docker">Reddit</a></li>
                </ul>
            </div>
        </div>
    </div>

    </footer>
    <script>const pageURL = "/registry/spec/manifest-v2-2/";</script><script>
    let PDRTJS_settings_8453675 = {
        "id": "8453675",
        "unique_id": "registry/spec/manifest-v2-2.md",
        "title": "Image Manifest V 2, Schema 2 ",
        "font_family": "Open Sans, sans serif",
        "font_color": "b9c2cc",
        "font_align": "center",
        "permalink": "https://github.com/docker/docker.github.io/blob/master/registry/spec/manifest-v2-2.md"
    };
    (function (d, c, j) {
        if (!document.getElementById(j)) {
            let pd=d.createElement(c),s;pd.id=j;pd.src='https://polldaddy.com/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd, s);
        }
    }(document, 'script', 'pd-rating-js'));
</script></body>
</html>

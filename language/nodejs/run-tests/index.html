<!-- Page generated 2021-11-17 12:16:07 +0000-->
<!DOCTYPE html>
<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WL2QLG5');</script>
<title>Run your Tests using Node.js and Mocha frameworks | Docker Documentation</title>
  <meta name="description" content="How to Build and Run your Tests using Node.js and Mocha frameworks" />
  <meta name="keywords" content="Node.js, build, Mocha, test">
  <link rel="canonical" href="https://docs.docker.com/language/nodejs/run-tests/" />

  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/favicons/docs@2x.ico" sizes="129x128">
  <link rel="apple-touch-icon" type="image/x-icon" href="/favicons/docs@2x.ico" sizes="129x128">
  <meta name="msapplication-TileImage" content="/favicons/docs@2x.ico">
  <meta property="og:image" content="/favicons/docs@2x.ico"/>
  <meta name="theme-color" content="#2496ed" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- hide elements that are only shown without JavaScript enabled -->
  <script>document.documentElement.classList.add('js')</script>
  <style>html.js .no-js { display: none !important; }</style><script defer src="/js/theme-switcher.js"></script>
  <script defer src="/js/anchorlinks.js"></script>
  <script defer src="/js/jquery.js"></script>
  <script defer src="/js/bootstrap.min.js"></script>
  <script defer src="/js/docs.js"></script><script defer src="/js/search.js"></script><link rel="preload" as="font" href="https://fonts.gstatic.com/s/opensans/v18/mem8YaGs126MiZpBA-UFVZ0bf8pkAg.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/fonts/geomanist/hinted-Geomanist-Book.woff2"    type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/fonts/geomanist/hinted-Geomanist-Regular.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/fonts/glyphicons-halflings-regular.woff2"       type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/fonts/fontawesome-webfont.woff2?v=4.7.0"        type="font/woff2" crossorigin="anonymous">

  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css" id="pagestyle">

  <!-- SEO stuff -->
  <meta name="twitter:title" itemprop="title name" content="Run your Tests using Node.js and Mocha frameworks"/>
  <meta name="twitter:description" property="og:description" itemprop="description" content="" />
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:domain" content="docs.docker.com"/>
  <meta name="twitter:site" content="@docker_docs"/>
  <meta name="twitter:url" content="https://twitter.com/docker_docs"/>
  <meta name="twitter:image:src" content="https://docs.docker.com/images/docs@2x.png"/>
  <meta name="twitter:image:alt" content="Docker Documentation"/>
  <meta property="og:title" content="Run your Tests using Node.js and Mocha frameworks" />
  <meta property="og:description" content="How to Build and Run your Tests using Node.js and Mocha frameworks" />
  <meta property="og:type" content="website"/>
  <meta property="og:updated_time" itemprop="dateUpdated" content="2021-11-17T12:16:07+00:00"/>
  <meta property="og:image" itemprop="image primaryImageOfPage" content="https://docs.docker.com/images/docs@2x.png"/>
  <meta property="og:locale" content="en_US" />
  <meta property="og:url" content="https://docs.docker.com/language/nodejs/run-tests/" />
  <meta property="og:site_name" content="Docker Documentation" />
  <meta property="article:published_time" itemprop="datePublished" content="2021-11-17T12:16:07+00:00"/>
  <script type="application/ld+json">{"@context":"http://schema.org","@type":"WebPage","headline":"Run your Tests using Node.js and Mocha frameworks","description":"How to Build and Run your Tests using Node.js and Mocha frameworks","url":"https://docs.docker.com/language/nodejs/run-tests/"}</script>
  <!-- END SEO STUFF -->
</head>
<body class="colums">
    <header>
        <nav class="nav-secondary navbar navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/">
                <img class="logo" src="/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs" width="160" height="28" />
            </a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="logo-mobile">
    <a href="/">
        <img src="/images/docker-icon.svg" alt="Docker Docs" title="Docker Docs" width="30" height="30" />
    </a>
</div>
<div class="search-form" id="search-div">
    <form class="search-form form-inline" id="searchForm" action="/search/" method="get">
        <label for="st-search-input" class="sr-only">Search</label>
        <input class="search-field form-control ds-input" id="st-search-input" name="q" placeholder="Search the docs" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteResults"></div>
        <!-- <button type="submit" class="search-submit btn btn-default">Search</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container hidden-sm hidden-xs">
    <div>
        <ul class="nav navbar-nav"><li><a href="/" id="home">Home</a></li><li><a href="/get-started/overview/" id="guides">Guides</a></li><li><a href="/desktop/" id="manuals">Manuals</a></li><li><a href="/reference/" id="reference">Reference</a></li><li><a href="/samples/" id="samples">Samples</a></li></ul>
    </div>
    <div class="ctrl-right">
        <a href="javascript:void(0)" id="menu-toggle" aria-label="Current page's menu toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
    </div>
</div>
<div class="row hidden-sm hidden-xs">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li><a href="/" title="Docker docs homepage"><i class="fa fa-home"></i></a></li>
            <li><a href="/get-started/overview/">Guides</a></li><li><a href="/language/">Language-specific guides (New)</a></li><li><a href="/language/nodejs/">Node.js</a></li><li><a href="/language/nodejs/run-tests/">Run your tests</a></li></ol>
    </nav>
</div></div>
    </div>
</nav>

    </header>
    <div class="wrapper right-open">
        <div class="container-fluid">
            <div class="row">
                <div class="col-body">
                    <main class="col-content content">
                        <section class="section"><h1>Run your Tests using Node.js and Mocha frameworks</h1><p><em class="reading-time">Estimated reading time: 9 minutes</em></p><ul class="pagination">
  <li><a href="/language/nodejs/build-images/">Build images</a></li>
  <li><a href="/language/nodejs/run-containers/">Run your image as a container</a></li>
  <li><a href="/language/nodejs/develop/">Use containers for development</a></li>
  <li class="active"><a href="/language/nodejs/run-tests/">Run your tests</a></li>
  <li><a href="/language/nodejs/configure-ci-cd/">Configure CI/CD</a></li>
  <li><a href="/language/nodejs/deploy/">Deploy your app</a></li>
</ul>

<h2 id="prerequisites">Prerequisites</h2>

<p>Work through the steps to build an image and run it as a containerized application in <a href="/language/nodejs/develop/">Use your container for development</a>.</p>

<h2 id="introduction">Introduction</h2>

<p>Testing is an essential part of modern software development. Testing can mean a lot of things to different development teams. There are unit tests, integration tests and end-to-end testing. In this guide we take a look at running your unit tests in Docker.</p>

<h2 id="create-a-test">Create a test</h2>

<p>Let’s define a Mocha test in a <code class="highlighter-rouge">./test</code> directory within our application.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> mkdir <span class="nt">-p</span> <span class="nb">test</span>
</code></pre></div></div>

<p>Save the following code in <code class="highlighter-rouge">./test/test.js</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'assert'</span><span class="p">);</span>
<span class="nx">describe</span><span class="p">(</span><span class="s1">'Array'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">'#indexOf()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">'should return -1 when the value is not present'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="running-locally-and-testing-the-application">Running locally and testing the application</h3>

<p>Let’s build our Docker image and confirm everything is running properly. Run the following command to build and run your Docker image in a container.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker-compose <span class="nt">-f</span> docker-compose.dev.yml up <span class="nt">--build</span>
</code></pre></div></div>

<p>Now let’s test our application by POSTing a JSON payload and then make an HTTP GET request to make sure our JSON was saved correctly.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> http://localhost:8000/test <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
</span><span class="go">	"msg": "testing"
}'
</span></code></pre></div></div>

<p>Now, perform a GET request to the same endpoint to make sure our JSON payload was saved and retrieved correctly. The “id” and “createDate” will be different for you.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> curl http://localhost:8000/test
<span class="go">
{"code":"success","payload":[{"msg":"testing","id":"e88acedb-203d-4a7d-8269-1df6c1377512","createDate":"2020-10-11T23:21:16.378Z"}]}
</span></code></pre></div></div>

<h2 id="install-mocha">Install Mocha</h2>

<p>Run the following command to install Mocha and add it to the developer dependencies:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> npm install <span class="nt">--save-dev</span> mocha
</code></pre></div></div>

<h2 id="update-packagejson-and-dockerfile-to-run-tests">Update package.json and Dockerfile to run tests</h2>

<p>Okay, now that we know our application is running properly, let’s try and run our tests inside of the container. We’ll use the same docker run command we used above but this time, we’ll override the CMD that is inside of our container with npm run test. This will invoke the command that is in the package.json file under the “script” section. See below.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
<span class="p">...</span>
  <span class="s2">"scripts"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"test"</span><span class="p">:</span> <span class="s2">"mocha ./**/*.js"</span><span class="p">,</span>
    <span class="s2">"start"</span><span class="p">:</span> <span class="s2">"nodemon --inspect=0.0.0.0:9229 server.js"</span>
  <span class="p">},</span>
<span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Below is the Docker command to start the container and run tests:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker-compose <span class="nt">-f</span> docker-compose.dev.yml run notes npm run <span class="nb">test</span>
<span class="go">Creating node-docker_notes_run ... 

</span><span class="gp">&gt;</span> node-docker@1.0.0 <span class="nb">test</span> /code
<span class="gp">&gt;</span> mocha ./<span class="k">**</span>/<span class="k">*</span>.js
<span class="go">


  Array
</span><span class="gp">    #</span>indexOf<span class="o">()</span>
<span class="go">      ✓ should return -1 when the value is not present


  1 passing (11ms)

</span></code></pre></div></div>

<h3 id="multi-stage-dockerfile-for-testing">Multi-stage Dockerfile for testing</h3>

<p>In addition to running the tests on command, we can run them when we build our image, using a multi-stage Dockerfile. The following Dockerfile will run our tests and build our production image.</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># syntax=docker/dockerfile:1</span>
<span class="k">FROM</span><span class="s"> node:14.15.4 as base</span>

<span class="k">WORKDIR</span><span class="s"> /code</span>

<span class="k">COPY</span><span class="s"> package.json package.json</span>
<span class="k">COPY</span><span class="s"> package-lock.json package-lock.json</span>

<span class="k">FROM</span><span class="s"> base as test</span>
<span class="k">RUN </span>npm ci
<span class="k">COPY</span><span class="s"> . .</span>
<span class="k">CMD</span><span class="s"> [ "npm", "run", "test" ]</span>

<span class="k">FROM</span><span class="s"> base as prod</span>
<span class="k">RUN </span>npm ci <span class="nt">--production</span>
<span class="k">COPY</span><span class="s"> . .</span>
<span class="k">CMD</span><span class="s"> [ "node", "server.js" ]</span>
</code></pre></div></div>

<p>We first add a label <code class="highlighter-rouge">as base</code> to the <code class="highlighter-rouge">FROM node:14.15.4</code> statement. This allows us to refer to this build stage in other build stages. Next we add a new build stage labeled test. We will use this stage for running our tests.</p>

<p>Now let’s rebuild our image and run our tests. We will run the same docker build command as above but this time we will add the <code class="highlighter-rouge">--target test</code> flag so that we specifically run the test build stage.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker build <span class="nt">-t</span> node-docker <span class="nt">--target</span> <span class="nb">test</span> <span class="nb">.</span>
<span class="go">[+] Building 66.5s (12/12) FINISHED
</span><span class="gp"> =&gt;</span> <span class="o">[</span>internal] load build definition from Dockerfile                                                                                                                 0.0s
<span class="gp"> =&gt;</span> <span class="o">=&gt;</span> transferring dockerfile: 662B                                                                                                                                 0.0s
<span class="gp"> =&gt;</span> <span class="o">[</span>internal] load .dockerignore
<span class="c"> ...
</span><span class="gp">  =&gt;</span> <span class="o">[</span>internal] load build context                                                                                                                                    4.2s
<span class="gp"> =&gt;</span> <span class="o">=&gt;</span> transferring context: 9.00MB                                                                                                                                  4.1s
<span class="gp"> =&gt;</span> <span class="o">[</span>base 2/4] WORKDIR /code                                                                                                                                         0.2s
<span class="gp"> =&gt;</span> <span class="o">[</span>base 3/4] COPY package.json package.json                                                                                                                        0.0s
<span class="gp"> =&gt;</span> <span class="o">[</span>base 4/4] COPY package-lock.json package-lock.json                                                                                                              0.0s
<span class="gp"> =&gt;</span> <span class="o">[</span><span class="nb">test </span>1/2] RUN npm ci                                                                                                                                            6.5s
<span class="gp"> =&gt;</span> <span class="o">[</span><span class="nb">test </span>2/2] COPY <span class="nb">.</span> <span class="nb">.</span>
</code></pre></div></div>

<p>Now that our test image is built, we can run it in a container and see if our tests pass.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-it</span> <span class="nt">--rm</span> <span class="nt">-p</span> 8000:8000 node-docker
<span class="go">
</span><span class="gp">&gt;</span> node-docker@1.0.0 <span class="nb">test</span> /code
<span class="gp">&gt;</span> mocha ./<span class="k">**</span>/<span class="k">*</span>.js
<span class="go">


  Array
</span><span class="gp">    #</span>indexOf<span class="o">()</span>
<span class="go">      ✓ should return -1 when the value is not present


  1 passing (12ms)

</span></code></pre></div></div>

<p>I’ve truncated the build output but you can see that the Mocha test runner completed and all our tests passed.</p>

<p>This is great but at the moment we have to run two docker commands to build and run our tests. We can improve this slightly by using a RUN statement instead of the CMD statement in the test stage. The CMD statement is not executed during the building of the image but is executed when you run the image in a container. While with the RUN statement, our tests will be run during the building of the image and stop the build when they fail.</p>

<p>Update your Dockerfile with the highlighted line below.</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># syntax=docker/dockerfile:1</span>
<span class="k">FROM</span><span class="s"> node:14.15.4 as base</span>

<span class="k">WORKDIR</span><span class="s"> /code</span>

<span class="k">COPY</span><span class="s"> package.json package.json</span>
<span class="k">COPY</span><span class="s"> package-lock.json package-lock.json</span>

<span class="k">FROM</span><span class="s"> base as test</span>
<span class="k">RUN </span>npm ci
<span class="k">COPY</span><span class="s"> . .</span>
<span class="k">RUN </span>npm run <span class="nb">test</span>

<span class="k">FROM</span><span class="s"> base as prod</span>
<span class="k">RUN </span>npm ci <span class="nt">--production</span>
<span class="k">COPY</span><span class="s"> . .</span>
<span class="k">CMD</span><span class="s"> [ "node", "server.js" ]</span>
</code></pre></div></div>

<p>Now to run our tests, we just need to run the docker build command as above.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker build <span class="nt">-t</span> node-docker <span class="nt">--target</span> <span class="nb">test</span> <span class="nb">.</span>
<span class="go">[+] Building 8.9s (13/13) FINISHED
</span><span class="gp"> =&gt;</span> <span class="o">[</span>internal] load build definition from Dockerfile      0.0s
<span class="gp"> =&gt;</span> <span class="o">=&gt;</span> transferring dockerfile: 650B                      0.0s
<span class="gp"> =&gt;</span> <span class="o">[</span>internal] load .dockerignore                         0.0s
<span class="gp"> =&gt;</span> <span class="o">=&gt;</span> transferring context: 2B
<span class="go">
</span><span class="gp">&gt;</span> node-docker@1.0.0 <span class="nb">test</span> /code
<span class="gp">&gt;</span> mocha ./<span class="k">**</span>/<span class="k">*</span>.js
<span class="go">


  Array
</span><span class="gp">    #</span>indexOf<span class="o">()</span>
<span class="go">      ✓ should return -1 when the value is not present


  1 passing (9ms)

Removing intermediate container beadc36b293a
</span><span class="gp"> ---&gt;</span> 445b80e59acd
<span class="go">Successfully built 445b80e59acd
Successfully tagged node-docker:latest
</span></code></pre></div></div>

<p>I’ve truncated the output again for simplicity but you can see that our tests are run and passed. Let’s break one of the tests and observe the output when our tests fail.</p>

<p>Open the test/test.js file and change line 5 as follows.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     1	var assert <span class="o">=</span> require<span class="o">(</span><span class="s1">'assert'</span><span class="o">)</span><span class="p">;</span>
     2	describe<span class="o">(</span><span class="s1">'Array'</span>, <span class="k">function</span><span class="o">()</span> <span class="o">{</span>
     3	  describe<span class="o">(</span><span class="s1">'#indexOf()'</span>, <span class="k">function</span><span class="o">()</span> <span class="o">{</span>
     4	    it<span class="o">(</span><span class="s1">'should return -1 when the value is not present'</span>, <span class="k">function</span><span class="o">()</span> <span class="o">{</span>
     5	      assert.equal<span class="o">([</span>1, 2, 3].indexOf<span class="o">(</span>3<span class="o">)</span>, <span class="nt">-1</span><span class="o">)</span><span class="p">;</span>
     6	    <span class="o">})</span><span class="p">;</span>
     7	  <span class="o">})</span><span class="p">;</span>
     8	<span class="o">})</span><span class="p">;</span>
</code></pre></div></div>

<p>Now, run the same docker build command from above and observe that the build fails and the failing testing information is printed to the console.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker build <span class="nt">-t</span> node-docker <span class="nt">--target</span> <span class="nb">test</span> <span class="nb">.</span>
<span class="go">Sending build context to Docker daemon  22.35MB
Step 1/8 : FROM node:14.15.4 as base
</span><span class="gp"> ---&gt;</span> 995ff80c793e
<span class="c">...
</span><span class="go">Step 8/8 : RUN npm run test
</span><span class="gp"> ---&gt;</span> Running <span class="k">in </span>b96d114a336b
<span class="go">
</span><span class="gp">&gt;</span> node-docker@1.0.0 <span class="nb">test</span> /code
<span class="gp">&gt;</span> mocha ./<span class="k">**</span>/<span class="k">*</span>.js
<span class="go">


  Array
</span><span class="gp">    #</span>indexOf<span class="o">()</span>
<span class="go">      1) should return -1 when the value is not present


  0 passing (12ms)
  1 failing

  1) Array
</span><span class="gp">       #</span>indexOf<span class="o">()</span>
<span class="go">         should return -1 when the value is not present:

      AssertionError [ERR_ASSERTION]: 2 == -1
      + expected - actual

      -2
      +-1
      
</span><span class="gp">      at Context.&lt;anonymous&gt;</span> <span class="o">(</span><span class="nb">test</span>/test.js:5:14<span class="o">)</span>
<span class="go">      at processImmediate (internal/timers.js:461:21)



npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! node-docker@1.0.0 test: `mocha ./**/*.js`
npm ERR! Exit status 1
</span><span class="c">...
</span></code></pre></div></div>

<h2 id="next-steps">Next steps</h2>

<p>In this module, we took a look at running tests as part of our Docker image build process.</p>

<p>In the next module, we’ll take a look at how to set up a CI/CD pipeline using GitHub Actions. See:</p>

<p><a href="/language/nodejs/configure-ci-cd/" class="button primary-btn">Configure CI/CD</a></p>

<h2 id="feedback">Feedback</h2>

<p>Help us improve this topic by providing your feedback. Let us know what you think by creating an issue in the <a href="https://github.com/docker/docker.github.io/issues/new?title=[Node.js%20docs%20feedback]" target="_blank" rel="noopener" class="_">Docker Docs</a> GitHub repository. Alternatively, <a href="https://github.com/docker/docker.github.io/pulls" target="_blank" rel="noopener" class="_">create a PR</a> to suggest updates.</p>

<p><br /></p>
<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="/search/?q=Node.js">Node.js</a>, <a href="/search/?q=build">build</a>, <a href="/search/?q=Mocha">Mocha</a>, <a href="/search/?q=test">test</a></span><div class="ratings-div"><div id="pd_rating_holder_8453675"></div></div></section>
                    </main>
                    <nav class="col-nav">
                        <div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
                            <div id="navbar" class="nav-sidebar">
                                <ul class="nav hidden-md hidden-lg"></ul>
                                <ul class="nav" id="jsTOCLeftNav"></ul>
                            </div>
                        </div>
                    </nav>
                    <div class="col-toc">
                        <div class="sidebar hidden-xs hidden-sm">
                            <div class="toc-nav">
                                <div class="feedback-links">
                                    <ul><li><a href="https://github.com/docker/docker.github.io/edit/master/language/nodejs/run-tests.md"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit this page</a></li><li><a href="https://github.com/docker/docker.github.io/issues/new?body=File: [language/nodejs/run-tests.md](https://docs.docker.com/language/nodejs/run-tests/)" class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> Request docs changes</a></li>
                                        <li><div class="toggle-mode">
  <div class="icon">
      <i class="fa fa-sun-o" aria-hidden="true"></i>
  </div>
  <div class="toggle-switch">
      <label class="switch">
          <input type="checkbox" id="switch-style">
          <span class="slider round"></span>
      </label>
  </div>
  <div class="icon">
      <i class="fa fa-moon-o" aria-hidden="true"></i>
  </div>
</div>
</li>
                                    </ul>
                                </div><div id="side-toc-title">On this page:</div>
<ul id="my_toc" class="inline_toc">
  <li><a href="#prerequisites" class="nomunge">Prerequisites</a></li>
  <li><a href="#introduction" class="nomunge">Introduction</a></li>
  <li><a href="#create-a-test" class="nomunge">Create a test</a>
    <ul>
      <li><a href="#running-locally-and-testing-the-application" class="nomunge">Running locally and testing the application</a></li>
    </ul>
  </li>
  <li><a href="#install-mocha" class="nomunge">Install Mocha</a></li>
  <li><a href="#update-packagejson-and-dockerfile-to-run-tests" class="nomunge">Update package.json and Dockerfile to run tests</a>
    <ul>
      <li><a href="#multi-stage-dockerfile-for-testing" class="nomunge">Multi-stage Dockerfile for testing</a></li>
    </ul>
  </li>
  <li><a href="#next-steps" class="nomunge">Next steps</a></li>
  <li><a href="#feedback" class="nomunge">Feedback</a></li>
</ul>

</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer">
          
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/why-docker">Why Docker?</a></b></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container?</a></li>
                        <li><a href="https://docker.events.cube365.net/dockercon/">DockerCon</a></li>
                        <li><b><a href="https://www.docker.com/products/overview">Products</a></b></li>
                        <li><a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a></li>
                        <li><a href="https://www.docker.com/products/docker-hub">Docker Hub</a></li>
                        <li><a href="https://www.docker.com/roadmap">Docker Product Roadmap</a></li>
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Features</a></b></li>
                        <li><a href="https://www.docker.com/products/container-runtime">Container Runtime</a></li>
                        <li><a href="https://www.docker.com/products/developer-tools">Developer Tools</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Developers</a></b></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/open-source">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Pricing</a></b></li>
                        <li><a href="https://www.docker.com/pricing/faq">FAQs</a></li>
                        <li><a href="https://www.docker.com/partners/programs">Docker Verified Publisher Program</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/company" target="_blank" rel="noopener">Company</a></b></li>
                        <li><a href="https://www.docker.com/company">About Us</a></li>
                        <li><a href="https://www.docker.com/blog/" target="_blank" rel="noopener">Blog</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners">Partners</a></li>
                        <li><a href="https://www.docker.com/company/newsroom">Newsroom</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact Us</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2013-2021 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-slideshare"><a href="https://www.slideshare.net/docker">Slideshare</a></li>
                    <li class="fa fa-reddit"><a href="https://www.reddit.com/r/docker">Reddit</a></li>
                </ul>
            </div>
        </div>
    </div>

    </footer>
    <script>const pageURL = "/language/nodejs/run-tests/";</script><script>
    let PDRTJS_settings_8453675 = {
        "id": "8453675",
        "unique_id": "language/nodejs/run-tests.md",
        "title": "Run your Tests using Node.js and Mocha frameworks",
        "font_family": "Open Sans, sans serif",
        "font_color": "b9c2cc",
        "font_align": "center",
        "permalink": "https://github.com/docker/docker.github.io/blob/master/language/nodejs/run-tests.md"
    };
    (function (d, c, j) {
        if (!document.getElementById(j)) {
            let pd=d.createElement(c),s;pd.id=j;pd.src='https://polldaddy.com/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd, s);
        }
    }(document, 'script', 'pd-rating-js'));
</script></body>
</html>
